--- libavformat/file.c.orig	2024-09-30 01:31:48.000000000 +0200
+++ libavformat/file.c	2025-03-09 19:40:48.591314818 +0100
@@ -164,11 +164,13 @@
     return c->fd;
 }
 
+#define REMOVE_PROTO(x) if(av_strstart(x, "file:", &x)) av_strstart(x, "//", &x); // eum.
+
 static int file_check(URLContext *h, int mask)
 {
     int ret = 0;
     const char *filename = h->filename;
-    av_strstart(filename, "file:", &filename);
+    REMOVE_PROTO(filename)
 
     {
 #if HAVE_ACCESS && defined(R_OK)
@@ -249,7 +251,7 @@
 #if HAVE_UNISTD_H
     int ret;
     const char *filename = h->filename;
-    av_strstart(filename, "file:", &filename);
+    REMOVE_PROTO(filename)
 
     ret = rmdir(filename);
     if (ret < 0 && (errno == ENOTDIR
@@ -271,8 +273,8 @@
 {
     const char *filename_src = h_src->filename;
     const char *filename_dst = h_dst->filename;
-    av_strstart(filename_src, "file:", &filename_src);
-    av_strstart(filename_dst, "file:", &filename_dst);
+    REMOVE_PROTO(filename_src)
+    REMOVE_PROTO(filename_dst)
 
     if (rename(filename_src, filename_dst) < 0)
         return AVERROR(errno);
@@ -287,7 +289,7 @@
     int fd;
     struct stat st;
 
-    av_strstart(filename, "file:", &filename);
+    REMOVE_PROTO(filename)
 
     if (flags & AVIO_FLAG_WRITE && flags & AVIO_FLAG_READ) {
         access = O_CREAT | O_RDWR;

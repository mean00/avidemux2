UNSET(CMAKE_CXX_VISIBILITY_PRESET)
UNSET(CMAKE_VISIBILITY_INLINES_HIDDEN)

if (USE_VDPAU)
	ADD_SUBDIRECTORY(ADM_coreVdpau)
endif (USE_VDPAU)
if (USE_XVBA)
	ADD_SUBDIRECTORY(ADM_coreXvba)
endif (USE_XVBA)
if (USE_LIBVA)
	ADD_SUBDIRECTORY(ADM_coreLibVA)
endif (USE_LIBVA)
IF(USE_DXVA2)# AND NOT MSVC)
# TEMPORARY	ADD_SUBDIRECTORY(ADM_coreDxva2)
ENDIF(USE_DXVA2)# AND NOT MSVC)

FILE(WRITE  ${CMAKE_BINARY_DIR}/config/ADM_coreConfig.cmake "")
IF(USE_VDPAU)
        FILE(APPEND  ${CMAKE_BINARY_DIR}/config/ADM_coreConfig.cmake "SET(USE_VDPAU 1)\n")
ENDIF(USE_VDPAU)
IF(USE_XVBA)
        FILE(APPEND  ${CMAKE_BINARY_DIR}/config/ADM_coreConfig.cmake "SET(USE_XVBA 1)\n")
ENDIF(USE_XVBA)
IF(USE_LIBVA)
        FILE(APPEND  ${CMAKE_BINARY_DIR}/config/ADM_coreConfig.cmake "SET(USE_LIBVA 1)\n")
        FILE(APPEND  ${CMAKE_BINARY_DIR}/config/ADM_coreConfig.cmake "SET(LIBVA_INCLUDE_DIR \"${LIBVA_INCLUDE_DIR}\")\n")
        FILE(APPEND  ${CMAKE_BINARY_DIR}/config/ADM_coreConfig.cmake "SET(LIBVA_CFLAGS \"${LIBVA_CFLAGS}\")\n")
        FILE(APPEND  ${CMAKE_BINARY_DIR}/config/ADM_coreConfig.cmake "SET(LIBVA_LIBRARY_DIR \"${LIBVA_LIBRARY_DIR}\")\n")
ENDIF(USE_LIBVA)
IF(USE_DXVA2)
        FILE(APPEND  ${CMAKE_BINARY_DIR}/config/ADM_coreConfig.cmake "SET(USE_DXVA2 1)\n")
ENDIF(USE_DXVA2)
IF(USE_NVENC)
        FILE(APPEND  ${CMAKE_BINARY_DIR}/config/ADM_coreConfig.cmake "SET(USE_NVENC 1)\n")
ENDIF(USE_NVENC)
IF(USE_VIDEOTOOLBOX)
        ADD_SUBDIRECTORY(ADM_coreVideoToolbox)
        FILE(APPEND  ${CMAKE_BINARY_DIR}/config/ADM_coreConfig.cmake "SET(USE_VIDEOTOOLBOX 1)\n")
ENDIF(USE_VIDEOTOOLBOX)
